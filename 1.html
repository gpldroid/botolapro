<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù…Ø´ØºÙ„ IPTV Ø§Ø­ØªØ±Ø§ÙÙŠ | Ø¨Ø­Ø« + ÙÙ„ØªØ±Ø© + Ø´Ø¹Ø§Ø±Ø§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Ù…Ø´ØºÙ„ IPTV Ø§Ø­ØªØ±Ø§ÙÙŠ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¨Ø­Ø«ØŒ Ø§Ù„ÙÙ„ØªØ±Ø©ØŒ ÙˆØ¹Ø±Ø¶ Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ù…Ù„Ù M3U." />
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.15/dist/hls.min.js"></script>
<style>
body{margin:0;font-family:Tahoma,Arial;background:#0f172a;color:#e5e7eb}
h1{text-align:center;font-size:20px;margin:8px}
.app{display:flex;height:calc(100vh - 60px)}
.sidebar{width:340px;background:#020617;border-left:1px solid #1e293b;display:flex;flex-direction:column}
.controls{padding:8px;border-bottom:1px solid #1e293b}
.controls input,.controls select{width:100%;margin-bottom:6px;padding:6px;background:#020617;color:#e5e7eb;border:1px solid #1e293b}
.list{flex:1;overflow:auto}
.channel{display:flex;align-items:center;gap:8px;padding:8px;border-bottom:1px solid #1e293b;cursor:pointer}
.channel:hover{background:#1e293b}
.channel img{width:32px;height:32px;object-fit:contain;background:#000}
.player{flex:1;background:black;display:flex;align-items:center;justify-content:center}
video{width:100%;height:100%}
</style>
</head>
<body>
<h1>ğŸ“º Ù…Ø´ØºÙ„ IPTV Ø§Ø­ØªØ±Ø§ÙÙŠ</h1>
<div class="app">
  <div class="sidebar">
    <div class="controls">
      <input id="search" placeholder="ğŸ” Ø¨Ø­Ø« Ø¹Ù† Ù‚Ù†Ø§Ø©" oninput="render()">
      <select id="filter" onchange="render()">
        <option value="">ğŸŒ ÙƒÙ„ Ø§Ù„Ù„ØºØ§Øª</option>
      </select>
    </div>
    <div class="list" id="list"></div>
  </div>
  <div class="player">
    <video id="player" controls autoplay></video>
  </div>
</div>
<script>
const M3U_URL='https://iptv-org.github.io/iptv/index.language.m3u';
let channels=[],hls;
fetch(M3U_URL).then(r=>r.text()).then(parse);
function parse(txt){
 const lines=txt.split('\n');let ch={};
 lines.forEach(l=>{
  if(l.startsWith('#EXTINF')){
    ch={};
    ch.name=l.split(',').pop();
    ch.logo=(l.match(/tvg-logo="(.*?)"/)||[])[1]||'';
    ch.lang=(l.match(/tvg-language="(.*?)"/)||[])[1]||'';
  }
  if(l.startsWith('http')){ch.url=l;channels.push(ch)}
 });
 buildFilter();render();
}
function buildFilter(){
 const f=document.getElementById('filter');
 [...new Set(channels.map(c=>c.lang).filter(Boolean))].sort().forEach(l=>{
  const o=document.createElement('option');o.value=l;o.textContent=l;f.appendChild(o);
 });
}
function render(){
 const q=search.value.toLowerCase();
 const lang=filter.value;
 list.innerHTML='';
 channels.filter(c=>(!lang||c.lang===lang)&&c.name.toLowerCase().includes(q))
 .forEach(c=>{
  const d=document.createElement('div');d.className='channel';
  d.innerHTML=`<img src="${c.logo}" onerror="this.style.display='none'"> <span>${c.name}</span>`;
  d.onclick=()=>play(c.url);
  list.appendChild(d);
 });
}
function play(url){
 if(hls)hls.destroy();
 if(Hls.isSupported()){
  hls=new Hls({lowLatencyMode:true});
  hls.loadSource(url);hls.attachMedia(player);
 }else{player.src=url}
}
</script>
</body>
</html>
